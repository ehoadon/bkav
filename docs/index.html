<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang T·ªïng H·ª£p D·ª± √Ån &amp; Admin Dashboard</title>
  <style>
    :root {--primary-color:#0066cc;--secondary-color:#005bb5;--bg-color:#f0f4f8;--card-bg:#fff;--text-color:#222;--shadow:rgba(0,0,0,0.1);} 
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:Arial,sans-serif;background:var(--bg-color);color:var(--text-color);min-height:100vh;}
    header{background:var(--primary-color);color:#fff;padding:1.5rem 1rem;position:relative;text-align:center;}
    header h1{font-size:1.8rem;margin-bottom:0.2rem}
    header p{opacity:0.85;font-size:1rem}
    #adminBtn{position:absolute;top:1rem;right:1rem;background:var(--secondary-color);border:none;padding:0.5rem 1rem;border-radius:4px;color:#fff;cursor:pointer;transition:0.2s;}
    #adminBtn:hover{background:#004999}
    .container{max-width:1200px;margin:2rem auto;padding:0 1rem}
    .grid{display:grid;grid-gap:1.5rem;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));}
    .card{background:var(--card-bg);border-radius:8px;box-shadow:0 2px 6px var(--shadow);overflow:hidden;display:flex;flex-direction:column;transition:transform 0.2s}
    .card:hover{transform:translateY(-4px)}
    .card img{width:100%;height:140px;object-fit:cover}
    .card-content{padding:1rem;flex:1;display:flex;flex-direction:column}
    .card-content h3{margin-bottom:0.75rem;color:var(--primary-color);font-size:1.1rem}
    .card-content p{flex:1;font-size:0.95rem;margin-bottom:1rem}
    .card-content a{align-self:flex-start;text-decoration:none;background:var(--primary-color);color:#fff;padding:0.5rem 1rem;border-radius:4px;transition:0.2s}
    .card-content a:hover{background:var(--secondary-color)}
    footer{text-align:center;padding:1rem 0;background:#fff;border-top:1px solid #ddd;font-size:0.9rem;color:#555;margin-top:2rem}
    /* Dashboard styles */
    #dashboard{display:none;padding:2rem 0}
    .stats-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1rem;margin-bottom:2rem}
    .stat-card{background:var(--card-bg);padding:1rem;border-radius:8px;box-shadow:0 1px 4px var(--shadow);text-align:center}
    .stat-card h4{font-size:1rem;color:var(--primary-color);margin-bottom:0.5rem}
    .stat-card p{font-size:1.6rem;font-weight:bold}
    .chart-container{background:var(--card-bg);padding:1rem;border-radius:8px;box-shadow:0 1px 4px var(--shadow)}
    /* Login overlay */
    #login-container{position:fixed;inset:0;background:rgba(0,0,0,0.5);display:none;justify-content:center;align-items:center;z-index:999}
    .login-card{background:#fff;padding:1.5rem;border-radius:8px;box-shadow:0 2px 8px var(--shadow);width:320px;text-align:center}
    .login-card h2{color:var(--primary-color);margin-bottom:1rem;font-size:1.25rem}
    .login-card input{width:100%;padding:0.5rem;margin-bottom:0.75rem;border:1px solid #ccc;border-radius:4px}
    .login-card button{width:100%;padding:0.5rem;background:var(--primary-color);color:#fff;border:none;border-radius:4px;cursor:pointer;transition:0.2s}
    .login-card button:hover{background:var(--secondary-color)}
    .login-card .error{color:red;font-size:0.85rem;margin-top:0.5rem}
  </style>
</head>
<body>
  <!-- Login Overlay -->
  <div id="login-container">
    <div class="login-card">
      <h2>ƒêƒÉng nh·∫≠p Admin</h2>
      <input type="text" id="username" placeholder="T√™n admin">
      <input type="password" id="password" placeholder="M·∫≠t kh·∫©u">
      <button id="loginBtn">ƒêƒÉng nh·∫≠p</button>
      <div id="loginError" class="error"></div>
    </div>
  </div>

  <!-- Public Content -->
  <header>
    <h1>Trang T·ªïng H·ª£p D·ª± √Ån</h1>
    <p>N∆°i t·∫≠p trung c√°c c√¥ng c·ª• &amp; t√≠nh nƒÉng</p>
    <div id="userArea">
  <button id="adminBtn">ƒêƒÉng nh·∫≠p</button>
</div>
  </header>

  <div id="main-content" class="container">
    <nav class="grid">
      <!-- Example cards -->
      <div class="card"><img src="images/encrypt-tool.png"><div class="card-content"><h3>M√£ H√≥a/Gi·∫£i M√£</h3><p>H·ªó tr·ª£ JSON, XML, BEPOS v·ªõi AES &amp; Base64</p><a href="./En-Comp.V3.html">Chi ti·∫øt</a></div></div>
      <div class="card"><img src="images/task-stats.png"><div class="card-content"><h3>Th·ªëng K√™ C√¥ng Vi·ªác</h3><p>Nh·∫≠p s·ªë li·ªáu, th·ªëng k√™, t√¨m ki·∫øm n√¢ng cao</p><a href="./TyLeXuLy.html">Chi ti·∫øt</a></div></div>
      <div class="card"><img src="images/notes-manager.png"><div class="card-content"><h3>Qu·∫£n L√Ω Ghi Ch√∫</h3><p>Th√™m, ho√†n th√†nh, x√≥a; import/export JSON</p><a href="./Note.html">Chi ti·∫øt</a></div></div>
      <div class="card"><img src="images/ticks-converter.png"><div class="card-content"><h3>DateTime &amp; Ticks</h3><p>Chuy·ªÉn ƒë·ªïi nhanh gi·ªØa DateTime &amp; ticks .NET</p><a href="./datetimetoticks_V2.html">Chi ti·∫øt</a></div></div>
      <div class="card"><img src="images/xml-merge.png"><div class="card-content"><h3>G·ªôp file XML</h3><p>G·ªôp nhi·ªÅu file XML th√†nh 1</p><a href="./GopFileXML.html">Chi ti·∫øt</a></div></div>
      <div class="card"><img src="images/invoice.png"><div class="card-content"><h3>T·∫°o H√≥a ƒê∆°n XML</h3><p>Giao di·ªán t·∫°o h√≥a ƒë∆°n xu·∫•t XML</p><a href="./CreateInvoice_UpdateV2.html">Chi ti·∫øt</a></div></div>
    </nav>
  </div>

  <!-- Admin Dashboard -->
  <div id="dashboard" class="container">
    <nav style="text-align:right;margin-bottom:1rem;"><button onclick="backToMain()">‚Üí V·ªÅ trang ch√≠nh</button> <button onclick="logout()">ƒêƒÉng xu·∫•t</button></nav>
    <div class="stats-grid">
      <div class="stat-card"><h4>T·ªïng truy c·∫≠p</h4><p id="cntTotal">...</p></div>
      <div class="stat-card"><h4>Trang m√£ h√≥a</h4><p id="cntEncrypt">...</p></div>
      <div class="stat-card"><h4>Trang th·ªëng k√™</h4><p id="cntStats">...</p></div>
    </div>
    <div class="chart-container">
      <canvas id="pageChart" height="100"></canvas>
    </div>
  </div>

  <footer>&copy; 2025 ThangHDb. All rights reserved.</footer>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    let isLoggedIn = false;
    // Credentials
    const credentials={admin:'admin'};
    const loginContainer=document.getElementById('login-container');
    const mainContent=document.getElementById('main-content');
    const dashboard=document.getElementById('dashboard');
    const loginError=document.getElementById('loginError');
    document.getElementById('adminBtn').onclick=()=>loginContainer.style.display='flex';
    document.getElementById('loginBtn').onclick=()=>{
      const u=document.getElementById('username').value,
            p=document.getElementById('password').value;
if (credentials[u] === p) {
  isLoggedIn = true;
  loginContainer.style.display = 'none';
  mainContent.style.display = 'none';
  dashboard.style.display = 'block';
  updateLoginStatus();
  loadStats();
}


      else loginError.textContent='Sai t√™n ho·∫∑c m·∫≠t kh·∫©u.';
    };
function logout() {
  isLoggedIn = false;
  dashboard.style.display = 'none';
  mainContent.style.display = 'block';
  updateLoginStatus();
}


function backToMain() {
  dashboard.style.display = 'none';
  mainContent.style.display = 'block';
  updateLoginStatus(); // c·∫≠p nh·∫≠t l·∫°i n√∫t ƒëƒÉng nh·∫≠p
}


    // Load stats via CountAPI
    async function fetchCount(key){ try{const r=await fetch(`https://api.countapi.xyz/get/demo/${key}`);return (await r.json()).value;}catch{return 0;} }
    async function loadStats(){
      const total=await fetchCount('index');
      const enc=await fetchCount('encrypt');
      const stats=await fetchCount('stats');
      document.getElementById('cntTotal').innerText=total;
      document.getElementById('cntEncrypt').innerText=enc;
      document.getElementById('cntStats').innerText=stats;
      // Chart
      new Chart(document.getElementById('pageChart'),{type:'bar',data:{labels:['Homepage','Encrypt','Stats'],datasets:[{label:'Views',data:[total,enc,stats]}]},options:{scales:{y:{beginAtZero:true}}}});
    }
    // Initialize CountAPI keys
    ['index','encrypt','stats'].forEach(k=>fetch(`https://api.countapi.xyz/create?namespace=demo&key=${k}&value=0&enable=true`));
    const userArea = document.getElementById('userArea');

// L∆∞u tr·∫°ng th√°i ƒëƒÉng nh·∫≠p
function saveLogin(user) {
  sessionStorage.setItem('authenticated', 'true');
  sessionStorage.setItem('username', user);
}

// Hi·ªÉn th·ªã l·ªùi ch√†o
function updateGreeting(user) {
  userArea.innerHTML = `üëã Ch√†o m·ª´ng <strong>${user}</strong>`;
}

// Ki·ªÉm tra n·∫øu user ƒë√£ ƒëƒÉng nh·∫≠p tr∆∞·ªõc ƒë√≥
window.addEventListener('DOMContentLoaded', () => {
  const isAuth = sessionStorage.getItem('authenticated') === 'true';
  const username = sessionStorage.getItem('username');
  if (isAuth && username) {
    mainContent.style.display = 'block';
    loginContainer.style.display = 'none';
    dashboard.style.display = 'none';
    updateGreeting(username);
  }
});
    function updateLoginStatus() {
  const btn = document.getElementById('adminBtn');
  if (isLoggedIn) {
    btn.innerHTML = '<strong>üëã Ch√†o m·ª´ng Admin</strong>';
    btn.onclick = () => {
      mainContent.style.display = 'none';
      dashboard.style.display = 'block';
    };
  } else {
    btn.innerText = 'ƒêƒÉng nh·∫≠p';
    btn.onclick = () => loginContainer.style.display = 'flex';
  }
}


  </script>
</body>
</html>
